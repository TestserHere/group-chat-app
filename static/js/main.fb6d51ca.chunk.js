(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){e.exports=a(30)},24:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(12),o=a.n(s),r=(a(24),a(13)),l=a(5),m=(a(29),a(10));const i=Object(r.a)({apiKey:"AIzaSyAThnPos7CBAUo9KU00soMwOgx0vFXVmL8",authDomain:"groupchatapp-12918.firebaseapp.com",projectId:"groupchatapp-12918",storageBucket:"groupchatapp-12918.firebasestorage.app",messagingSenderId:"312169425350",appId:"1:312169425350:web:26dca269b31fbb407baac7",measurementId:"G-7XDHBHSCZD"}),u=Object(l.e)(i);function d(){const[e,t]=Object(n.useState)(""),[a,s]=Object(n.useState)(""),[o,r]=Object(n.useState)(""),[i,d]=Object(n.useState)([]),[b,p]=Object(n.useState)([]),[g,E]=Object(n.useState)(localStorage.getItem("username")||""),[y,f]=Object(n.useState)(!!localStorage.getItem("username"));Object(n.useEffect)(()=>{(async()=>{const e=await Object(l.d)(Object(l.a)(u,"chatrooms"));p(e.docs.map(e=>e.id))})()},[]),Object(n.useEffect)(()=>{if(e){const t=Object(l.h)(Object(l.a)(u,e),Object(l.g)("timestamp","asc")),a=Object(l.f)(t,e=>{d(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>a()}},[e]);const h=async()=>{e&&o.trim()&&(await Object(l.i)(Object(l.c)(u,e,(new Date).getTime().toString()),{text:o,timestamp:(new Date).getTime(),user:g}),r(""))};return c.a.createElement("div",{className:"container mt-4 d-flex flex-column align-items-center",style:{maxWidth:"400px"}},c.a.createElement("h1",{className:"text-center mb-4"},"Message App"),c.a.createElement("button",{className:"btn btn-secondary mb-2",onClick:()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()}},c.a.createElement(m.a,null)),y?e?c.a.createElement("div",{className:"card p-4 shadow-sm w-100 d-flex flex-column",style:{height:"500px"}},c.a.createElement("p",{className:"text-center"},"Room Code: ",c.a.createElement("span",{className:"badge bg-secondary"},e)),c.a.createElement("div",{className:"messages-box flex-grow-1 p-3 mb-3 overflow-auto",style:{backgroundColor:"#f1f1f1",borderRadius:"10px"}},i.map(t=>c.a.createElement("div",{key:t.id,className:`d-flex align-items-center ${t.user===g?"justify-content-end":"justify-content-start"}`,style:{marginBottom:"5px",position:"relative"},onMouseEnter:e=>e.currentTarget.querySelector(".msg-options").style.display="block",onMouseLeave:e=>e.currentTarget.querySelector(".msg-options").style.display="none"},t.user===g&&c.a.createElement("div",{className:"msg-options me-2",style:{display:"none"}},c.a.createElement("button",{className:"btn btn-sm btn-danger me-1",onClick:()=>(async(t,a)=>{a===g&&await Object(l.b)(Object(l.c)(u,e,t))})(t.id,t.user)},c.a.createElement(m.b,null))),c.a.createElement("div",{className:`p-3 text-white ${t.user===g?"bg-primary":"bg-secondary"}`,style:{maxWidth:"75%",borderRadius:"20px",padding:"10px 15px"}},t.user,": ",t.text)))),c.a.createElement("div",{className:"input-group"},c.a.createElement("input",{className:"form-control rounded-pill",placeholder:"Message...",value:o,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"===e.key&&h()}}),c.a.createElement("button",{onClick:h,className:"btn btn-success rounded-pill"},"Send"))):c.a.createElement("div",{className:"card p-4 shadow-sm w-100"},c.a.createElement("input",{className:"form-control mb-2",placeholder:"Enter Custom Room Code",value:a,onChange:e=>s(e.target.value)}),c.a.createElement("button",{onClick:async()=>{a.trim()&&(await Object(l.i)(Object(l.c)(u,"chatrooms",a),{id:a}),t(a))},className:"btn btn-primary w-100"},"Create Chat Room"),c.a.createElement("h2",{className:"mt-4"},"Join an Existing Room"),c.a.createElement("ul",{className:"list-group"},b.map(e=>c.a.createElement("li",{key:e,className:"list-group-item d-flex justify-content-between"},c.a.createElement("span",null,e),c.a.createElement("button",{onClick:()=>(e=>{t(e)})(e),className:"btn btn-secondary"},"Join"))))):c.a.createElement("div",{className:"card p-4 shadow-sm w-100"},c.a.createElement("input",{className:"form-control mb-2",placeholder:"Enter a username",value:g,onChange:e=>E(e.target.value)}),c.a.createElement("button",{onClick:()=>{g.trim()&&(localStorage.setItem("username",g),setTimeout(()=>f(!0),100))},className:"btn btn-primary w-100"},"Set Username")))}var b=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,31)).then(t=>{let{getCLS:a,getFID:n,getFCP:c,getLCP:s,getTTFB:o}=t;a(e),n(e),c(e),s(e),o(e)})};o.a.createRoot(document.getElementById("root")).render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(d,null))),b()}},[[15,1,2]]]);
//# sourceMappingURL=main.fb6d51ca.chunk.js.map